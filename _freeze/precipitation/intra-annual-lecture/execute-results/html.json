{
  "hash": "93de213839d11e121ada25aeb9e28187",
  "result": {
    "markdown": "---\ntitle: Intra-annual variability of precipitation\nexecute:\n  freeze: auto\n---\n\n![](/archive/figures/monthly_tel_aviv_london_bars.png)\n\nLet's shift the months according the the hydrological year:  \n![](/archive/figures/monthly_tel_aviv_london_bars_hydrological_year.png)\n\n![](/archive/figures/radar_chart_tel_aviv_london.png)\n\n## Seasonality Index\n\nSources: @walsh_lawler, @walsh1981rainfall\n\n$R=$ mean annual precipitation  \n$m_i=$ precipitation mean for month $i$  \n\n$$ SI = \\displaystyle \\frac{1}{R} \\sum_{n=1}^{n=12} \\left| m_i - \\frac{R}{12} \\right| $$\n\n| $SI$ | Precipitation Regime |\n| --- | --- |\n| <0.19 | Precipitation spread throughout the year |\n| 0.20-0.39\t | Precipitation spread throughout the year, but with a definite wetter season |\n| 0.40-0.59\t | Rather seasonal with a short dry season |\n| 0.60-0.79\t | Seasonal |\n| 0.80-0.99\t | Marked seasonal with a long dry season |\n| 1.00-1.19\t\t | Most precipitation in <3 months |\n\n: {tbl-colwidths=\"[15,85]\"}\n\nLet's write some code to calculate the SI for Tel Aviv and London.\n\n::: {.cell execution_count=1}\n``` {.python .cell-code code-fold=\"true\" code-summary=\"Show/hide the code\"}\n# import packages\nimport numpy as np\nimport pandas as pd\nfrom calendar import month_abbr\n\n# load data\nmonth_numbers = np.arange(1,13)\nmonth_names = [month_abbr[i] for i in month_numbers]\ndef monthly_mean(station_name, freq):\n    # import daily data\n    df = pd.read_csv(station_name + '_' + freq + '.csv', sep=\",\")\n    # make 'DATE' the dataframe index\n    df['DATE'] = pd.to_datetime(df['DATE'])\n    df = df.set_index('DATE')\n    # print(df.index[0], df.index[-1])\n    if freq == 'daily':\n        # resample data by month\n        df_month = df['PRCP'].resample('M').sum()  # sum is labeled at the last day of the month \n        df_month = df_month/10                     # PRCP is given in tens of mm (see readme)\n    if freq == 'monthly':\n        df_month = df['PRCP']\n    # calculate monthly mean\n    monthly_mean = np.array([])  # empty array\n    for m in month_numbers:      # cycle over months (1, 2, 3, etc)\n        this_month_all_indices = (df_month.index.month == m)       # indices in df_month belonging to month m\n        this_month_mean = df_month[this_month_all_indices].mean()  # this is the monthly mean\n        monthly_mean = np.append(monthly_mean, this_month_mean)    # append\n    # make new df and return it\n    df_return = pd.DataFrame({'monthly rainfall (mm)':monthly_mean,\n                              'month names':month_names,\n                              'month number':month_numbers\n                            })\n    return df_return\n\n# load monthly mean\ndf_london = monthly_mean(\"LONDON_HEATHROW\", 'monthly')\ndf_telaviv = monthly_mean(\"TEL_AVIV_READING\", 'monthly')\n```\n:::\n\n\n::: {.cell execution_count=2}\n``` {.python .cell-code code-fold=\"true\" code-summary=\"Show/hide the code\"}\ndef walsh_index(df):\n    m = df[\"monthly rainfall (mm)\"]\n    R = df[\"monthly rainfall (mm)\"].sum()\n    SI = np.sum(np.abs(m-R/12)) / R\n    return SI\n\nlondon_index = walsh_index(df_london)\ntelaviv_index = walsh_index(df_telaviv)\nprint(\"Seasonality index (Walsh and Lawler, 1981)\")\nprint(f\"London: {london_index:.2f}\")\nprint(f\"Tel Aviv: {telaviv_index:.2f}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nSeasonality index (Walsh and Lawler, 1981)\nLondon: 0.13\nTel Aviv: 1.00\n```\n:::\n:::\n\n\n",
    "supporting": [
      "intra-annual-lecture_files"
    ],
    "filters": [],
    "includes": {}
  }
}